<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>State of the Restaurant Industry</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f5f5f5;
      }
      header {
        text-align: center;
        padding: 20px;
      }
      h1 {
        font-size: 2em;
        color: #333;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        padding: 10px;
        text-align: center;
        border: 1px solid #ddd;
      }
      th {
        background-color: #f8f8f8;
        font-weight: bold;
      }
      td {
        background-color: #fff;
      }
      footer {
        text-align: center;
        margin-top: 40px;
        font-size: 0.9em;
        color: #666;
      }
    </style>
  </head>
  <body>
    <header>
      <img
        src="https://www.opentable.com/img/OpenTable-logo.svg"
        alt="OpenTable Logo"
        style="width: 150px"
      />
      <h1>The restaurant industry, by the numbers</h1>
      <p>A snapshot of dining demand compared to 2024.</p>
    </header>
    <div class="container">
      <h2>Change in seated diners by month / day, 2025 vs. 2024</h2>
      <table id="dinersTable">
        <thead>
          <tr id="headerRow"></tr>
        </thead>
        <tbody id="dataRows"></tbody>
      </table>
    </div>
    <footer>
      <p>Â© 2025 OpenTable, Inc. All rights reserved.</p>
      <p>Data provided by OpenTable. Cite and link back if used.</p>
    </footer>

    <script>
      fetch("/data")
        .then((response) => response.json())
        .then((data) => {
          // Populate table headers (dates)
          const headerRow = document.getElementById("headerRow");
          headerRow.innerHTML =
            "<th>MONTH/DAY</th>" +
            data.dates.map((date) => `<th>${date}</th>`).join("");

          // Populate table rows (regions and values)
          const dataRows = document.getElementById("dataRows");
          data.regions.forEach((region) => {
            const row = document.createElement("tr");
            const regionName = Object.keys(region)[0]; // Assuming first key is region name
            row.innerHTML =
              `<td>${region[regionName]}</td>` +
              data.dates
                .map((date) => `<td>${region[date] || "-"}</td>`)
                .join("");
            dataRows.appendChild(row);
          });
        })
        .catch((error) => console.error("Error fetching data:", error));
    </script>
  </body>
</html>
